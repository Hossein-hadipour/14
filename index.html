<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>فرم ارزشیابی عملکرد مدیران و معاونین - شماره ۴</title>
<script src="https://unpkg.com/persian-date@1.1.0/dist/persian-date.min.js"></script>
<style>
  @font-face{
    font-family: "IRANYekan";
    src: local("Tahoma"), local("Arial");
  }
  body {
    font-family: IRANYekan, Tahoma, Arial;
    direction: rtl;
    margin: 20px;
    color: #222;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    font-size: 16px;
  }
  .container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(145deg, #ffffff, #e6e6e6);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  h1, h2 {
    margin: 10px 0 20px 0;
    text-align: center;
    color: #2c3e50;
  }
  h1 {
    font-size: 1.8em;
    background: linear-gradient(to right, #1976d2, #64b5f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  h2, h3, h4 {
    font-weight: 600;
  }
  label {
    display: block;
    margin: 8px 0 4px 0;
    font-weight: 600;
    color: #34495e;
  }
  input[type="text"], input[type="date"], select, textarea, input[type="number"] {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    border: 1px solid #dfe6e9;
    border-radius: 8px;
    background: #f8fafc;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  input:focus, textarea:focus, select:focus {
    border-color: #1976d2;
    box-shadow: 0 0 5px rgba(25, 118, 210, 0.3);
    outline: none;
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    align-items: start;
  }
  .full {
    grid-column: 1/-1;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
  }
  th, td {
    border: 1px solid #e0e0e0;
    padding: 8px;
    text-align: center;
  }
  th {
    background: linear-gradient(to bottom, #f3f3f3, #e0e0e0);
    font-weight: 600;
  }
  .right {
    text-align: right;
  }
  .actions {
    display: flex;
    gap: 12px;
    justify-content: flex-start;
    margin-top: 16px;
    flex-wrap: wrap;
  }
  button {
    padding: 10px 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: linear-gradient(45deg, #1976d2, #42a5f5);
    color: #fff;
    font-weight: 600;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  button:hover {
    transform: rotate(5deg) scale(1.05);
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
  }
  button:active {
    transform: rotate(0deg) scale(0.98);
  }
  .calc {
    background: linear-gradient(45deg, #1976d2, #42a5f5);
  }
  .print {
    background: linear-gradient(45deg, #4caf50, #81c784);
  }
  .reset {
    background: linear-gradient(45deg, #f44336, #ef5350);
  }
  .note {
    font-size: 0.9em;
    color: #555;
    margin-top: 8px;
  }
  footer {
    text-align: center;
    margin-top: 20px;
    padding: 10px;
    font-size: 0.9em;
    color: #34495e;
    background: linear-gradient(to top, #f5f7fa, #ffffff);
    border-top: 1px solid #dfe6e9;
  }
  @media print {
    body {
      margin: 0;
      font-size: 10px;
      line-height: 1.2;
    }
    .container {
      border: none;
      box-shadow: none;
      max-width: none;
      margin: 0;
      padding: 0;
      background: none;
    }
    .no-print {
      display: none;
    }
    table, th, td {
      page-break-inside: avoid;
      border: 1px solid #ccc;
      padding: 4px;
    }
    th {
      background: #f3f3f3;
    }
    footer {
      font-size: 8px;
      border-top: none;
      background: none;
    }
    input, textarea {
      padding: 4px;
      border: 1px solid #ccc;
    }
  }
  @media (max-width: 640px) {
    .grid {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>
<div class="container" id="form-root">
  <h1>فرم ارزشیابی عملکرد مدیران و معاونین واحدهای آموزشی – شماره ۴</h1>

  <div class="grid">
    <div>
      <label>۱- دستگاه</label>
      <input type="text" id="device" value="وزارت آموزش و پرورش"/>
    </div>
    <div>
      <label>۲- نام و نام خانوادگی</label>
      <input type="text" id="fullname" />
    </div>
    <div>
      <label>۳- عنوان پست سازمانی</label>
      <input type="text" id="title" />
    </div>
    <div>
      <label>۴- کد پرسنلی</label>
      <input type="text" id="personnel" />
    </div>
    <div>
      <label>۵- کد ملی</label>
      <input type="text" id="national" />
    </div>
    <div>
      <label>۶- واحد سازمانی</label>
      <input type="text" id="unit" />
    </div>
    <div>
      <label>۷- دوره ارزشیابی از تاریخ</label>
      <input type="date" id="from_date" value="2024-09-23"/>
      <p class="note" id="from_date_shamsi"></p>
    </div>
    <div>
      <label>تا تاریخ</label>
      <input type="date" id="to_date" value="2025-09-22"/>
      <p class="note" id="to_date_shamsi"></p>
    </div>
    <div class="full">
      <label>۸- مدت اشتغال در دوره (روز)</label>
      <input type="text" id="duration" readonly />
    </div>
  </div>

  <hr/>

  <h2>الف) عوامل اختصاصی</h2>
  <p class="note">برای هر آیتم: امتیاز را وارد کنید (۰ تا ۵). حداکثر جمع امتیاز ۵۰.</p>

  <table id="specific-table">
    <thead>
      <tr>
        <th>ردیف</th>
        <th>اقدام/فعالیت مورد انتظار</th>
        <th>حداکثر امتیاز</th>
        <th>امتیاز (ورودی)</th>
        <th>امتیاز کسب‌شده</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <div class="actions no-print">
    <button class="calc" onclick="addSpecificRow()">افزودن ردیف اختصاصی</button>
  </div>

  <h3>اهم اقدامات انجام شده</h3>
  <textarea id="specific-actions" rows="4" placeholder="اقدامات و توضیحات ..."></textarea>

  <hr/>

  <h2>ب) عوامل عمومی</h2>
  <h3>ب-۱ پشتیبان عملکرد (هر معیار حداکثر امتیاز مشخص دارد)</h3>
  <table id="general-support">
    <thead>
      <tr><th>معیار</th><th>شاخص</th><th>حداکثر امتیاز</th><th>امتیاز کسب‌شده</th></tr>
    </thead>
    <tbody>
      <tr><td>داشتن برنامه و زمان‌بندی</td><td>تهیه برنامه عملیاتی و ارائه گزارش</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-input" data-max="2"></td></tr>
      <tr><td>مسئولیت‌پذیری</td><td>تعهد و انگیزه</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-input" data-max="2"></td></tr>
      <tr><td>تلاش و کوشش</td><td>صرف وقت و پیگیری</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-input" data-max="2"></td></tr>
      <tr><td>کارآفرینی و نوآوری</td><td>پیشنهادات و روش‌های نو</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-input" data-max="2"></td></tr>
      <tr><td>کار تیمی</td><td>همکاری با همکاران</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-input" data-max="2"></td></tr>
      <tr><th colspan="2">جمع امتیاز</th><th class="max">۱۰</th><th id="general-support-total">۰</th></tr>
    </tbody>
  </table>

  <h3>ب-۲ فرآیندی</h3>
  <h4>ب-۲-۱ توسعه‌ای</h4>
  <table id="proc-dev">
    <thead><tr><th>معیار</th><th>شاخص</th><th>حداکثر امتیاز</th><th>امتیاز کسب‌شده</th></tr></thead>
    <tbody>
      <tr><td>توسعه فردی (آموزش)</td><td>هر ۱۰ ساعت آموزش = ۱ امتیاز</td><td class="max">۴</td><td><input type="number" min="0" max="4" step="0.1" class="proc-input" data-max="4"></td></tr>
      <tr><td>بکارگیری فناوری</td><td>استفاده از روش‌های IT</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="proc-input" data-max="2"></td></tr>
      <tr><td>پیشنهاد سازنده/مستندسازی</td><td>پیشنهاد مصوب یا مستندسازی</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="proc-input" data-max="2"></td></tr>
      <tr><td>شرکت موثر در جلسات</td><td>دو مورد موثر (مستند)</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="proc-input" data-max="2"></td></tr>
      <tr><th colspan="2">جمع امتیاز</th><th class="max">۱۰</th><th id="proc-dev-total">۰</th></tr>
    </tbody>
  </table>

  <h4>ب-۲-۲ تشویقات</h4>
  <p class="note">برای هر مدال/تقدیرنامه، تعداد را وارد کنید. حداکثر جمع امتیاز ۷.</p>
  <table id="rewards">
    <thead><tr><th>نوع تقدیرنامه/عنوان</th><th>هر مورد = امتیاز</th><th>تعداد</th><th>امتیاز حاصل</th></tr></thead>
    <tbody>
      <tr><td>تقدیرنامه از رئیس‌جمهور</td><td>۳.۵</td><td><input type="number" min="0" step="1" class="rew-count" data-score="3.5"></td><td class="rew-score">۰</td></tr>
      <tr><td>وزیر/معاون رئیس‌جمهور</td><td>۳</td><td><input type="number" min="0" step="1" class="rew-count" data-score="3"></td><td class="rew-score">۰</td></tr>
      <tr><td>استاندار/معاون وزیر/رییس سازمان</td><td>۲</td><td><input type="number" min="0" step="1" class="rew-count" data-score="2"></td><td class="rew-score">۰</td></tr>
      <tr><td>مدیرکل مربوط</td><td>۱.۵</td><td><input type="number" min="0" step="1" class="rew-count" data-score="1.5"></td><td class="rew-score">۰</td></tr>
      <tr><td>رئیس اداره/منطقه/ناحیه</td><td>۱</td><td><input type="number" min="0" step="1" class="rew-count" data-score="1"></td><td class="rew-score">۰</td></tr>
      <tr><td>مدیر واحد آموزشی</td><td>۰.۵</td><td><input type="number" min="0" step="1" class="rew-count" data-score="0.5"></td><td class="rew-score">۰</td></tr>
      <tr><td>کسب عنوان کارمند/مدیر نمونه</td><td>۵</td><td><input type="number" min="0" step="1" class="rew-count" data-score="5"></td><td class="rew-score">۰</td></tr>
      <tr><th colspan="3">جمع امتیاز تشویقات</th><th id="rewards-total">۰</th></tr>
    </tbody>
  </table>

  <h4>ب-۲-۳ رفتاری</h4>
  <table id="behavioral">
    <thead><tr><th>بخش</th><th>شاخص</th><th>حداکثر امتیاز</th><th>امتیاز کسب‌شده</th></tr></thead>
    <tbody>
      <tr><td>رعایت نظم و انضباط</td><td>حضور به‌موقع و انجام تعهدات</td><td class="max">۳</td><td><input type="number" min="-8" max="3" step="0.1" class="beh-input" data-max="3"></td></tr>
      <tr><td>رعایت مقررات اداری</td><td>احترام به سلسله مراتب</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="beh-input" data-max="2"></td></tr>
      <tr><td>رضایت مراجعین (مثبت)</td><td>مراجعینی که رضایت اعلام کرده‌اند</td><td class="max">۳</td><td><input type="number" min="0" max="3" step="0.1" class="beh-input" data-max="3"></td></tr>
      <tr><td>نارضایتی مراجعان</td><td>در صورت وجود نارضایتی (منفی)</td><td class="max">-۸</td><td><input type="number" min="-8" max="0" step="0.1" class="beh-input" data-max="-8"></td></tr>
      <tr><th colspan="2">جمع امتیاز رفتار شغلی</th><th class="max">—</th><th id="beh-job-total">۰</th></tr>
      <tr><th colspan="4">روابط و برخورد مناسب با همکاران</th></tr>
      <tr><td>قابلیت اعتماد</td><td>اعتماد همکاران</td><td class="max">۱</td><td><input type="number" min="0" max="1" step="0.1" class="col-input" data-max="1"></td></tr>
      <tr><td>انتقال دانش و تجربه</td><td>آموزش همکاران</td><td class="max">۱</td><td><input type="number" min="0" max="1" step="0.1" class="col-input" data-max="1"></td></tr>
      <tr><td>مشارکت و همکاری</td><td>همکاری در انجام فعالیت‌ها</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="col-input" data-max="2"></td></tr>
      <tr><td>رفتار و برخورد مناسب</td><td>احترام و تعامل</td><td class="max">۱</td><td><input type="number" min="0" max="1" step="0.1" class="col-input" data-max="1"></td></tr>
      <tr><th colspan="2">جمع امتیاز روابط</th><th class="max">—</th><th id="beh-rel-total">۰</th></tr>
      <tr><th colspan="4">رفتار عمومی و فرهنگ سازمانی</th></tr>
      <tr><td>پایبندی به فرهنگ سازمانی</td><td>عمل به ارزش‌ها</td><td class="max">۳</td><td><input type="number" min="0" max="3" step="0.1" class="gen-beh-input" data-max="3"></td></tr>
      <tr><td>عمل به ارزش‌های حرفه‌ای</td><td>تعهد حرفه‌ای</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-beh-input" data-max="2"></td></tr>
      <tr><td>عمل به مبانی اخلاقی</td><td>رفتار اخلاقی</td><td class="max">۳</td><td><input type="number" min="0" max="3" step="0.1" class="gen-beh-input" data-max="3"></td></tr>
      <tr><td>حضور در مراسم و مناسک</td><td>شرکت در مناسبت‌ها</td><td class="max">۲</td><td><input type="number" min="0" max="2" step="0.1" class="gen-beh-input" data-max="2"></td></tr>
      <tr><th colspan="2">جمع امتیاز رفتار عمومی</th><th class="max">—</th><th id="beh-gen-total">۰</th></tr>
    </tbody>
  </table>

  <hr/>

  <h3>نتایج و جمع‌بندی</h3>
  <table>
    <tr><th>شرح</th><th>حداکثر امتیاز</th><th>امتیاز کسب‌شده</th></tr>
    <tr><td>جمع امتیاز عوامل اختصاصی</td><td id="max-specific">۵۰</td><td id="score-specific">۰</td></tr>
    <tr><td>جمع امتیاز عوامل عمومی پشتیبان</td><td>۱۰</td><td id="score-general-support">۰</td></tr>
    <tr><td>جمع امتیاز عوامل عمومی فرآیندی</td><td>۱۰</td><td id="score-proc-dev">۰</td></tr>
    <tr><td>جمع امتیاز تشویقات</td><td>۷</td><td id="score-rewards">۰</td></tr>
    <tr><td>جمع امتیاز رفتاری (همه بخش‌ها)</td><td>—</td><td id="score-behavioral">۰</td></tr>
    <tr><th>امتیاز کل ارزشیابی</th><th>—</th><th id="score-total">۰</th></tr>
  </table>

  <div class="actions no-print">
    <button class="calc" onclick="addSpecificRow()">افزودن ردیف اختصاصی</button>
    <button class="calc" onclick="calculateAll()">محاسبه و بازخوانی</button>
    <button class="print" onclick="window.print()">چاپ / ذخیره PDF</button>
    <button class="reset" onclick="resetForm()">پاک‌سازی فرم</button>
  </div>

  <p class="note no-print">نسخه چاپ‌شده مطابق با ساختار فرم شماره ۴ تنظیم شده است. برای گرفتن PDF از گزینه «چاپ / ذخیره PDF» استفاده کنید.</p>

  <hr/>
  <div class="full">
    <label>نام و نام خانوادگی ارزیابی‌کننده</label>
    <input type="text" id="evaluator" />
    <label>نام و نام خانوادگی تأییدکننده</label>
    <input type="text" id="approver" />
    <label>نظر ارزیابی‌شونده</label>
    <textarea id="reviewee-opinion" rows="3"></textarea>
  </div>
</div>

<footer>
  سازنده: حسین هادی پور 🔨
</footer>

<script>
/* Utility: convert digits to Persian numerals for display */
function toPersianDigits(s){
  if(s===null || s===undefined) return '';
  return String(s).replace(/\d/g, function(d){ return '۰۱۲۳۴۵۶۷۸۹'[d]; });
}

/* Date duration calc and Shamsi date conversion */
document.getElementById('from_date').addEventListener('change', updateDurationAndShamsi);
document.getElementById('to_date').addEventListener('change', updateDurationAndShamsi);
function updateDurationAndShamsi(){
  let f = document.getElementById('from_date').value;
  let t = document.getElementById('to_date').value;
  // Update duration
  if(f && t){
    let fd = new Date(f), td = new Date(t);
    let diff = Math.max(0, Math.round((td - fd) / (1000*60*60*24)) + 1);
    document.getElementById('duration').value = toPersianDigits(diff);
  }
  // Update Shamsi dates
  if(f){
    let pd = new persianDate(new Date(f));
    document.getElementById('from_date_shamsi').textContent = 'معادل شمسی: ' + pd.format('YYYY/MM/DD');
  } else {
    document.getElementById('from_date_shamsi').textContent = '';
  }
  if(t){
    let pd = new persianDate(new Date(t));
    document.getElementById('to_date_shamsi').textContent = 'معادل شمسی: ' + pd.format('YYYY/MM/DD');
  } else {
    document.getElementById('to_date_shamsi').textContent = '';
  }
}

/* Specific rows creation */
const specificList = [
  'پیگیری و اجرای بخشنامه های مربوط به اموال دولتی',
  'استفاده صحیح از اموال دولتی در اختیار',
  'راه اندازی انجمن های علمی پژوهشی دانش آموزان در مدارس',
  'ارتباط نظام مند و اثر بخش با پژوهش سرا از طریق رابط پژوهشی',
  'ایمن سازی فضا و تجهیزات ورزشی، اجرا و ارزشیابی درس تربیت بدنی و برگزاری مسابقات ورزشی درون مدرسه ای',
  'آگاهی از مصوبات شورای عالی آموزش و پرورش و اجرای دقیق آن',
  'اجرای مطلوب برنامه درسی ملی در آموزشگاه',
  'برگزاری همایش ها و مسابقات مرتبط با حوزه پرورشی و اعلام بازخورد',
  'بر holding جلسات کارگروه بهداشت، تغذیه و ایمنی و ترویج طرح تغذیه سالم'
];

function addSpecificRow(itemText){
  const tbody = document.querySelector('#specific-table tbody');
  let idx = tbody.querySelectorAll('tr').length + 1;
  let text = itemText || specificList[idx-1] || '';
  let max = 5;
  let tr = document.createElement('tr');
  tr.innerHTML = `
    <td>${toPersianDigits(idx)}</td>
    <td class="right">${text}<br/><small>توضیحات: <input type="text" class="spec-desc" style="width:90%"></small></td>
    <td class="max">${toPersianDigits(max)}</td>
    <td><input type="number" min="0" max="5" step="0.1" class="spec-input" value="0"></td>
    <td class="spec-score">۰</td>
  `;
  tbody.appendChild(tr);
}

/* Initialize default specific rows */
for(let i=0;i<specificList.length;i++) addSpecificRow(specificList[i]);

/* Calculation functions */
function calculateSpecific(){
  let rows = document.querySelectorAll('#specific-table tbody tr');
  let totalScore = 0;
  rows.forEach(r=>{
    let input = r.querySelector('.spec-input');
    let score = parseFloat(input.value) || 0;
    score = Math.min(score, 5); // Cap each row at 5
    r.querySelector('.spec-score').textContent = toPersianDigits(score.toFixed(2));
    totalScore += score;
  });
  totalScore = Math.min(totalScore, 50); // Cap total at 50
  document.getElementById('max-specific').textContent = toPersianDigits(50);
  document.getElementById('score-specific').textContent = toPersianDigits(totalScore.toFixed(2));
  return {totalMax: 50, totalScore};
}

function calculateGeneralSupport(){
  let total = 0;
  document.querySelectorAll('#general-support .gen-input').forEach(inp=>{
    let v = parseFloat(inp.value) || 0; total += v;
  });
  document.getElementById('general-support-total').textContent = toPersianDigits(total.toFixed(2));
  document.getElementById('score-general-support').textContent = toPersianDigits(total.toFixed(2));
  return total;
}

function calculateProcDev(){
  let total = 0;
  document.querySelectorAll('#proc-dev .proc-input').forEach(inp=>{
    let v = parseFloat(inp.value) || 0; total += v;
  });
  document.getElementById('proc-dev-total').textContent = toPersianDigits(total.toFixed(2));
  document.getElementById('score-proc-dev').textContent = toPersianDigits(total.toFixed(2));
  return total;
}

function calculateRewards(){
  let total = 0;
  document.querySelectorAll('#rewards .rew-count').forEach((inp, i)=>{
    let cnt = parseInt(inp.value) || 0;
    let sc = parseFloat(inp.dataset.score) || 0;
    let rowScore = cnt * sc;
    inp.closest('tr').querySelector('.rew-score').textContent = toPersianDigits(rowScore.toFixed(2));
    total += rowScore;
  });
  total = Math.min(total, 7); // Cap total at 7
  document.getElementById('rewards-total').textContent = toPersianDigits(total.toFixed(2));
  document.getElementById('score-rewards').textContent = toPersianDigits(total.toFixed(2));
  return total;
}

function calculateBehavioral(){
  let jobTotal = 0;
  document.querySelectorAll('#behavioral .beh-input').forEach(inp=>{
    let v = parseFloat(inp.value) || 0; jobTotal += v;
  });
  document.getElementById('beh-job-total').textContent = toPersianDigits(jobTotal.toFixed(2));

  let relTotal = 0;
  document.querySelectorAll('#behavioral .col-input').forEach(inp=>{
    let v = parseFloat(inp.value) || 0; relTotal += v;
  });
  document.getElementById('beh-rel-total').textContent = toPersianDigits(relTotal.toFixed(2));

  let genTotal = 0;
  document.querySelectorAll('#behavioral .gen-beh-input').forEach(inp=>{
    let v = parseFloat(inp.value) || 0; genTotal += v;
  });
  document.getElementById('beh-gen-total').textContent = toPersianDigits(genTotal.toFixed(2));

  let total = jobTotal + relTotal + genTotal;
  document.getElementById('score-behavioral').textContent = toPersianDigits(total.toFixed(2));
  return total;
}

function calculateAll(){
  updateDurationAndShamsi();
  let spec = calculateSpecific();
  let gs = calculateGeneralSupport();
  let pd = calculateProcDev();
  let rw = calculateRewards();
  let bh = calculateBehavioral();
  let total = spec.totalScore + gs + pd + rw + bh;
  document.getElementById('score-total').textContent = toPersianDigits(total.toFixed(2));
}

function resetForm(){
  if(!confirm('آیا از پاک‌سازی فرم اطمینان دارید؟')) return;
  document.querySelectorAll('input[type="text"], input[type="number"], textarea').forEach(i=>{ i.value=''; });
  document.querySelectorAll('.spec-score, .rew-score').forEach(el=> el.textContent='۰');
  document.getElementById('max-specific').textContent='۵۰';
  document.getElementById('score-specific').textContent='۰';
  document.getElementById('score-total').textContent='۰';
  document.querySelector('#specific-table tbody').innerHTML = '';
  for(let i=0;i<specificList.length;i++) addSpecificRow(specificList[i]);
  updateDurationAndShamsi();
}

document.querySelectorAll('.gen-input').forEach(i=> i.addEventListener('input', calculateGeneralSupport));
document.querySelectorAll('.proc-input').forEach(i=> i.addEventListener('input', calculateProcDev));
document.querySelectorAll('.rew-count').forEach(i=> i.addEventListener('input', calculateRewards));
document.querySelectorAll('.beh-input, .col-input, .gen-beh-input').forEach(i=> i.addEventListener('input', calculateBehavioral));
document.addEventListener('input', function(e){
  if(e.target && e.target.classList.contains('spec-input')) calculateSpecific();
});

function localizeStaticNumbers(){
  document.querySelectorAll('.max').forEach(el=>{
    el.textContent = toPersianDigits(el.textContent);
  });
}
localizeStaticNumbers();
updateDurationAndShamsi();
calculateAll();
</script>
</body>
</html>
